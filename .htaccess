# Create an .htaccess file with sensible defaults for Filip's Apache-hosted static site
content = r"""
# ---------------------------------------------
# GO BEYOND TEAM — .htaccess (Apache)
# Bezpečnost, komprese a cache pro statický web
# Umísti tento soubor do kořenové složky webu (tam, kde je index.html).
# ---------------------------------------------

# UTF-8 jako výchozí znaková sada
AddDefaultCharset utf-8

# Zákaz výpisu adresářů
Options -Indexes

# MIME typy (pro jistotu)
AddType image/avif avif
AddType image/webp webp
AddType image/svg+xml svg svgz
AddType font/ttf ttf
AddType font/otf otf
AddType application/font-woff woff
AddType font/woff2 woff2
AddType application/javascript js
AddType text/css css

<IfModule mod_headers.c>
  # Bezpečnostní hlavičky (konzervativní, neblokují nic potřebného)
  Header set X-Content-Type-Options "nosniff"
  Header set X-Frame-Options "SAMEORIGIN"
  Header set Referrer-Policy "strict-origin-when-cross-origin"
  Header set X-XSS-Protection "1; mode=block"

  # Povolit CORS pro fonty (kvůli načítání z /src/ apod.)
  <FilesMatch "\.(ttf|otf|eot|woff|woff2)$">
    Header set Access-Control-Allow-Origin "*"
  </FilesMatch>
</IfModule>

# ---------------------------------------------
# Komprese
# ---------------------------------------------
<IfModule mod_brotli.c>
  BrotliCompressionQuality 5
  AddOutputFilterByType BROTLI_COMPRESS text/plain text/html text/css application/javascript application/json image/svg+xml
</IfModule>

<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE text/plain text/html text/css application/javascript application/json image/svg+xml
</IfModule>

# ---------------------------------------------
# Cacheování
# ---------------------------------------------
<IfModule mod_expires.c>
  ExpiresActive On

  # HTML – krátká cache (10 minut)
  ExpiresByType text/html "access plus 10 minutes"

  # CSS/JS – 1 měsíc (doporučeno verzovat soubory při změně)
  ExpiresByType text/css "access plus 1 month"
  ExpiresByType application/javascript "access plus 1 month"

  # Obrázky – 6 měsíců
  ExpiresByType image/png "access plus 6 months"
  ExpiresByType image/jpeg "access plus 6 months"
  ExpiresByType image/webp "access plus 6 months"
  ExpiresByType image/avif "access plus 6 months"
  ExpiresByType image/svg+xml "access plus 6 months"

  # Fonty – 1 rok
  ExpiresByType application/font-woff "access plus 1 year"
  ExpiresByType font/woff2 "access plus 1 year"
  ExpiresByType font/ttf "access plus 1 year"
  ExpiresByType font/otf "access plus 1 year"
</IfModule>

# Odstranění ETag (aby se nepletly s Cache-Control)
FileETag None
<IfModule mod_headers.c>
  Header unset ETag
</IfModule>

# ---------------------------------------------
# Přesměrování na HTTPS (VOLITELNÉ)
# Odkomentuj, jen pokud máš na doméně funkční HTTPS certifikát.
# ---------------------------------------------
# <IfModule mod_rewrite.c>
#   RewriteEngine On
#   RewriteCond %{HTTPS} !=on
#   RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]
# </IfModule>

# ---------------------------------------------
# Ochrana skrytých/konfiguračních souborů
# ---------------------------------------------
<FilesMatch "^\.">
  Require all denied
</FilesMatch>

# Blokace přístupu k určitým souborům
<FilesMatch "(^#.*#|\.(bak|conf|dist|psd|log|sql|swp|ini|sh))$">
  Require all denied
</FilesMatch>

# ---------------------------------------------
# Lite YouTube Embed – správné typy (pro jistotu)
# ---------------------------------------------
<IfModule mod_mime.c>
  AddType application/javascript js mjs
</IfModule>

# ---------------------------------------------
# Volitelné: odstraňování .html z URL (pokud bys chtěl pěkné URL)
# Používej jen pokud máš soubory bez konfliktů názvů.
# ---------------------------------------------
# <IfModule mod_rewrite.c>
#   RewriteEngine On
#   # /stranka -> /stranka.html (pouze pokud existuje odpovídající soubor)
#   RewriteCond %{REQUEST_FILENAME}.html -f
#   RewriteRule ^(.+?)/?$ $1.html [L]
# </IfModule>

"""
with open('/mnt/data/.htaccess', 'w', encoding='utf-8') as f:
    f.write(content)

print("Soubor .htaccess je připraven.")